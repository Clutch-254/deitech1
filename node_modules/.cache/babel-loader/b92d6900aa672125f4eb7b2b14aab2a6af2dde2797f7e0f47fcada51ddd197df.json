{"ast":null,"code":"// API utility for backend communication\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nclass API {\n  constructor() {\n    this.baseURL = API_BASE_URL;\n    this.token = localStorage.getItem('token');\n  }\n  setToken(token) {\n    this.token = token;\n    if (token) {\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('token');\n    }\n  }\n  async request(endpoint, options = {}) {\n    const url = `${this.baseURL}${endpoint}`;\n    const headers = {\n      'Content-Type': 'application/json',\n      ...options.headers\n    };\n    if (this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n    try {\n      const response = await fetch(url, {\n        ...options,\n        headers\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Request failed');\n      }\n      return data;\n    } catch (error) {\n      console.error('API Error:', error);\n      throw error;\n    }\n  }\n\n  // Products\n  async getProducts(filters = {}) {\n    const params = new URLSearchParams(filters);\n    return this.request(`/products?${params}`);\n  }\n  async getProduct(id) {\n    return this.request(`/products/${id}`);\n  }\n  async createProduct(productData) {\n    return this.request('/products', {\n      method: 'POST',\n      body: JSON.stringify(productData)\n    });\n  }\n  async updateProduct(id, productData) {\n    return this.request(`/products/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(productData)\n    });\n  }\n  async deleteProduct(id) {\n    return this.request(`/products/${id}`, {\n      method: 'DELETE'\n    });\n  }\n\n  // Analytics\n  async getAnalytics() {\n    return this.request('/analytics/summary');\n  }\n\n  // Auth\n  async login(email, password) {\n    const data = await this.request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n    if (data.access_token) {\n      this.setToken(data.access_token);\n    }\n    return data;\n  }\n  async register(userData) {\n    return this.request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    });\n  }\n  async getCurrentUser() {\n    return this.request('/auth/me');\n  }\n  logout() {\n    this.setToken(null);\n  }\n}\nexport default new API();","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","API","constructor","baseURL","token","localStorage","getItem","setToken","setItem","removeItem","request","endpoint","options","url","headers","response","fetch","data","json","ok","Error","error","console","getProducts","filters","params","URLSearchParams","getProduct","id","createProduct","productData","method","body","JSON","stringify","updateProduct","deleteProduct","getAnalytics","login","email","password","access_token","register","userData","getCurrentUser","logout"],"sources":["/home/bethwel/myprojects/deitech1/src/utils/api.js"],"sourcesContent":["// API utility for backend communication\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nclass API {\n    constructor() {\n        this.baseURL = API_BASE_URL;\n        this.token = localStorage.getItem('token');\n    }\n\n    setToken(token) {\n        this.token = token;\n        if (token) {\n            localStorage.setItem('token', token);\n        } else {\n            localStorage.removeItem('token');\n        }\n    }\n\n    async request(endpoint, options = {}) {\n        const url = `${this.baseURL}${endpoint}`;\n        const headers = {\n            'Content-Type': 'application/json',\n            ...options.headers,\n        };\n\n        if (this.token) {\n            headers['Authorization'] = `Bearer ${this.token}`;\n        }\n\n        try {\n            const response = await fetch(url, {\n                ...options,\n                headers,\n            });\n\n            const data = await response.json();\n\n            if (!response.ok) {\n                throw new Error(data.error || 'Request failed');\n            }\n\n            return data;\n        } catch (error) {\n            console.error('API Error:', error);\n            throw error;\n        }\n    }\n\n    // Products\n    async getProducts(filters = {}) {\n        const params = new URLSearchParams(filters);\n        return this.request(`/products?${params}`);\n    }\n\n    async getProduct(id) {\n        return this.request(`/products/${id}`);\n    }\n\n    async createProduct(productData) {\n        return this.request('/products', {\n            method: 'POST',\n            body: JSON.stringify(productData),\n        });\n    }\n\n    async updateProduct(id, productData) {\n        return this.request(`/products/${id}`, {\n            method: 'PUT',\n            body: JSON.stringify(productData),\n        });\n    }\n\n    async deleteProduct(id) {\n        return this.request(`/products/${id}`, {\n            method: 'DELETE',\n        });\n    }\n\n    // Analytics\n    async getAnalytics() {\n        return this.request('/analytics/summary');\n    }\n\n    // Auth\n    async login(email, password) {\n        const data = await this.request('/auth/login', {\n            method: 'POST',\n            body: JSON.stringify({ email, password }),\n        });\n        if (data.access_token) {\n            this.setToken(data.access_token);\n        }\n        return data;\n    }\n\n    async register(userData) {\n        return this.request('/auth/register', {\n            method: 'POST',\n            body: JSON.stringify(userData),\n        });\n    }\n\n    async getCurrentUser() {\n        return this.request('/auth/me');\n    }\n\n    logout() {\n        this.setToken(null);\n    }\n}\n\nexport default new API();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}